<%
  content_for :body_class_names, 'high-contrast'
  content_for :title, dashboard.name
  content_for :description, dashboard.name
%>

<script type="text/javascript">
  window.__INITIAL_STATE__ = {};
</script>

<div aria-hidden="true" class="patterns">
  <svg height="10" width="10" xmlns="http://www.w3.org/2000/svg" version="1.1">
    <defs>
      <pattern id="diagonal-stripe-1" patternUnits="userSpaceOnUse" width="10" height="10">
        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzEnLz4KPC9zdmc+Cg==" x="0" y="0" width="10" height="10"></image>
      </pattern>
    </defs>
  </svg>
</div>
<div id="dashboard-<%= dashboard.id %>" class="<%= dashboard.name_slug %>">

  <div class="container">
    <div class="row title-links">
      <h2>Dashboard</h2>
      <div class="aus-width-one-half">
        <h1><%= dashboard.name %></h1>
      </div>
      <div class="aus-width-one-half">
        <% if dashboard.show_url? %>
          <a href="<%= dashboard.url %>" target="_blank"><%= dashboard.url %><i class="fa fa-external-link"></i></a>
        <% end %>
        <%= link_to export_dashboard_path(dashboard, :format => 'csv') do %>
          Download dashboard data as CSV
        <% end %>
      </div>
    </div>
    <ul class="accordion dashboard-description">
      <li class="is-expanded"x>
        <a href="javascript:void(0)" class="js-accordion-trigger">Dashboard Description</a>
        <ul class="submenu">
          <li>
            <div class="row">
              <div class="aus-width-one-half">
                <h3>What is the Australian Citizenship Appointment Booking Service?</h3>
                <p>The Australian Citizenship Appointment Booking Service makes it quicker, easier and more convenient for users to reschedule a citizenship test appointment. Prior to the introduction of the online service, users were only able to change their appointment by calling the Department. The public beta release of the service is currently available in Melbourne, Victoria.</p>
              </div>
              <div class="aus-width-one-half">
                <h3>Where is this information from?</h3>
                <p>Department of Immigration and Border Protection.</p>
              </div>
            </div>
          </li>
        </ul>
      </li>
    </ul>
    <div class=" metric-breakdown-view">
      <% if dashboard.show_kpis? %>
          <div class="clearfix dashboard__kpis">
            <div class="container">
              <div class="row">
                <% dashboard.first_row.each do |widget| %>
                  <%= render :partial => 'widget', :locals => {:widget => widget.decorate} %>
                <% end %>
              </div>
            </div>
          </div>
      <% end %>
    </div>
    <ul class="accordion">
      <li>
        <a href="javascript:void(0)" class="js-accordion-trigger">Where is this information from?</a>
        <ul class="submenu">
          <li>
            <a href="javascript:void(0)">Sub Item 1</a>
          </li>
        </ul>
      </li>
    </ul>
    <h3>Performance history</h3>
  </div>
  <div class="hero-region">
    <div class="container">
      <div class="row dashboard__top">
        <div class="dashboard__header">
          <div class="badge__holder">
            <span class="badge-default"><%= dashboard.organisation.name %></span>
          </div>
        </div>
        <% if dashboard.show_hero? %>
          <div class="clearfix">
            <div class="hero-widget hero" data-data="<%= dashboard.hero.decorate.datasets_to_chart %>"></div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class="container-fluid metric-breakdown-view">

    <div class="container dashboard__secondary dashboard__below-the-line">
      <% dashboard.remaining_rows.each do |widgets| %>
        <div class="row">
          <% widgets.each do |widget| %>
            <%= render :partial => 'widget', :locals => {:widget => widget.decorate} %>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="row">
      <div class="container">
        <div class="widget widget-text clearfix">
          <div class="widget-text__inner aus-width-seven-twelfths">
            <div class="widget__title">
              <h4>Dashboard Information</h4>
            </div>
            <div id="dashboard-notes" class="widget__body">
              <% if dashboard.show_notes? %>
                <%= raw dashboard.notes %>
              <% else %>
                <p>No information available.</p>
              <% end %>
            </div>
          </div>
          <div class="widget-text__footer aus-width-five-twelfths">
            <% if dashboard.show_url? %>
              <p>Visit <a href="<%= dashboard.url %>" target="_blank"><%= dashboard.url %><i class="fa fa-external-link"></i></a></p>
            <% end %>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
